### 核心bug, 极为逆天

###### 症状
* 一开始并没有搞清楚状况, 导致后面一通瞎分析. 一开始以为:onDidCloseTextDocument不响应.
* 后来发现:
  1. 对于所有其他文件都正常响应, 唯有我们的3个文件, ye源文件, 左右临时分栏markdown文件不响应
  2. 再后来, 经过等待, 发现不是不响应, 而是180s之后响应.
  3. 并且逆天的是, 之前搞得同步保存, 保存之后还要预览, 这一套都很正常....好奇怪.
  4. 并且这些临时文件关闭之后, 我如果直接打开他们, 再关闭的时候, 这个回调是正常的. 立刻执行.
  



### 第一天, 一通瞎分析, 都不靠谱
* 问题是出现了事件循环, 关闭a的时候, 会关闭b和父亲, 此时又触发了关闭b的事件,这里面又去关闭父亲和a......
  * 这个bug好狠, 幸亏代码是逐步添加逐步测试的, 不然根本想不到....
* 解决
  * 判断爸爸是不是还在, 如果爸爸不在, 就不要做任何操作了.
  * 干活之前把兄弟删除了, 这样兄弟的关闭事件就不会触发进一步的操作.
  * 保存文件的时候, 如果无法读取, 那么就阻断后面所有操作.
###### 尝试修改:
1. 容错
  brocon=docdic[brother]?.getText()
  mycon=docdic[fsPath]?.getText()
  unless brocon? and mycon?
    odog "兄弟或我的内容不存在, 无法保存"
    return
2. 打断循环
   * 在关闭处理中, 把兄弟爸爸等等都删除.
  delete yefamily[fsPath]
  delete yefamily[brother]
   此时依旧没有解决:
3. 不能一直盯着出错的地方看, 这次问题应该是在save因为在那里我更新了webview视图, 而这个更新是比较占用时间的. 并且他不在焦点....
   拆分了updatewebview, 把保存和显示更新分开, 依旧没有解决:
###### 此时给ai分析, ai已经黔驴了
* claude认为是临时文件夹的保护机制
* ds认为是热退出（Hot Exit）机制
* 他们都建议:
 * 换保存目录, 换了, 没用.
 * 改为监控tab事件...
###### 唯一的收获: 经过反复测试, 症状更清晰了:
* 并不是不响应关闭事件, 而是180s之后响应.

### 第二天, 逐步排查
1. 测试下, 究竟都有哪些事件, 看看180s都影响哪些事件.
2. 删减项目, 找到触发180s的最小项目, 最准确的触发方式.